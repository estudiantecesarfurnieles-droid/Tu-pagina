<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ğŸ’– Nuestro Universo de Amor ğŸ’–</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/style.css" />
  <style>
    /* LOGIN OVERLAY */
    #loginOverlay {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      z-index: 2147483647 !important;
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      font-family: 'Poppins', sans-serif !important;
    }
    
    /* OCULTAR CONTENIDO SI NO ESTÃ AUTENTICADO */
    body:not(.authenticated) > *:not(#loginOverlay) {
      display: none !important;
    }
    
    /* MOSTRAR CONTENIDO SI ESTÃ AUTENTICADO */
    body.authenticated #loginOverlay {
      display: none !important;
    }
    
    body.authenticated > *:not(#loginOverlay) {
      display: block !important;
    }
    
    body.authenticated .pantalla {
      display: block !important;
    }
    
    #loginBox {
      background: rgba(255, 255, 255, 0.95) !important;
      border-radius: 20px !important;
      padding: 40px !important;
      max-width: 400px !important;
      width: 90% !important;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
      text-align: center !important;
    }
    
    #loginBox h2 {
      color: #667eea !important;
      margin-bottom: 10px !important;
      font-size: 2rem !important;
    }
    
    #loginBox p {
      color: #666 !important;
      margin-bottom: 30px !important;
    }
    
    #loginBox input {
      width: 100% !important;
      padding: 15px !important;
      margin-bottom: 15px !important;
      border: 2px solid #ddd !important;
      border-radius: 10px !important;
      font-size: 1rem !important;
      box-sizing: border-box !important;
    }
    
    #loginBox input:focus {
      outline: none !important;
      border-color: #667eea !important;
    }
    
    #loginBox button {
      width: 100% !important;
      padding: 15px !important;
      background: linear-gradient(45deg, #667eea, #764ba2) !important;
      color: white !important;
      border: none !important;
      border-radius: 10px !important;
      font-size: 1.1rem !important;
      font-weight: 600 !important;
      cursor: pointer !important;
      transition: transform 0.2s !important;
    }
    
    #loginBox button:hover {
      transform: translateY(-2px) !important;
    }
    
    #loginError {
      color: #e74c3c !important;
      margin-top: 10px !important;
      font-size: 0.9rem !important;
      display: none !important;
    }
  </style>
  <script>
    // SCRIPT DE LOGIN - EJECUTAR INMEDIATAMENTE
    (function() {
      const USUARIOS = [
        { username: "TICH", password: "TICH225" }
      ];

      function checkAuth() {
        return localStorage.getItem('auth') === 'true';
      }

      function login(username, password) {
        console.log('FunciÃ³n login llamada con:', username, password);
        console.log('USUARIOS:', USUARIOS);
        const user = USUARIOS.find(u => 
          u.username.toLowerCase() === username.toLowerCase() && 
          u.password === password
        );
        console.log('Usuario encontrado:', user);
        
        if (user) {
          localStorage.setItem('auth', 'true');
          localStorage.setItem('username', user.username);
          return true;
        }
        return false;
      }

      // EJECUTAR CUANDO EL DOM ESTÃ‰ LISTO
      function initLogin() {
        const overlay = document.getElementById('loginOverlay');
        const loginForm = document.getElementById('loginForm');
        const errorMsg = document.getElementById('loginError');
        
        // Si ya estÃ¡ autenticado, mostrar contenido y ocultar login
        if (checkAuth()) {
          document.body.classList.add('authenticated');
          return;
        }
        
        // Si NO estÃ¡ autenticado, asegurar que login estÃ© visible
        document.body.classList.remove('authenticated');

        // Manejar el formulario
        if (loginForm) {
          loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;

            if (!username || !password) {
              if (errorMsg) {
                errorMsg.textContent = 'Por favor completa todos los campos';
                errorMsg.style.display = 'block';
              }
              return;
            }

            console.log('Intentando login con:', username, password);
            if (login(username, password)) {
              console.log('Login exitoso, recargando pÃ¡gina...');
              if (overlay) overlay.style.display = 'none';
              if (errorMsg) errorMsg.style.display = 'none';
              
              // Recargar la pÃ¡gina para que todo funcione correctamente
              window.location.href = window.location.href;
            } else {
              console.log('Login fallÃ³, credenciales incorrectas');
              if (errorMsg) {
                errorMsg.textContent = 'Usuario o contraseÃ±a incorrectos';
                errorMsg.style.display = 'block';
              }
            }
          });
        }
      }

      // Ejecutar cuando DOM estÃ© listo
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initLogin);
      } else {
        initLogin();
      }
    })();
  </script>
</head>
<body>
  <!-- LOGIN OVERLAY - PRIMERO QUE TODO -->
  <div id="loginOverlay">
    <div id="loginBox">
      <h2>ğŸ’– Acceso al Universo ğŸ’–</h2>
      <p>Ingresa tus credenciales para continuar</p>
      <form id="loginForm">
        <input type="text" id="username" placeholder="Usuario" required autocomplete="off">
        <input type="password" id="password" placeholder="ContraseÃ±a" required autocomplete="off">
        <button type="submit">Ingresar ğŸ’•</button>
        <div id="loginError"></div>
      </form>
    </div>
  </div>

  <!-- Audios -->
  <audio id="musicaFondo" loop muted></audio>
  <audio id="musicaCarta"></audio>
  <audio id="musicaDespegueCohete" preload="auto"></audio>

  <!-- Modal carta (iframe) -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-content">
      <button class="cerrar" id="modalClose" aria-label="Cerrar">âœ• Cerrar</button>
      <h3 id="modal-titulo"></h3>
      <div id="modal-body"></div>
    </div>
  </div>

  <!-- Modal peluche -->
  <div id="modal-peluche" class="modal hidden">
    <div class="modal-content">
      <button class="cerrar" onclick="cerrarModalPeluche()">â¬…ï¸ Regresar</button>
      <h3 id="titulo-peluche"></h3>
      <p id="texto-peluche"></p>
    </div>
  </div>

  <!-- Modal imagen -->
  <div id="modal-imagen" class="modal hidden">
    <div class="modal-content-img">
      <button class="cerrar" onclick="cerrarModalImagen()">â¬…ï¸ Regresar</button>
      <div id="media-container">
        <img id="imagen-ampliada" src="" alt="Media ampliada" />
      </div>
    </div>
  </div>

  <!-- Modal Te ExtraÃ±o -->
  <div id="modal-te-extrano" class="modal hidden">
    <div class="modal-content">
      <button class="cerrar" onclick="cerrarModalExtraÃ±o()">â¬…ï¸ Volver</button>
      <h3>Te ExtraÃ±o</h3>
      <p>Escoge una opciÃ³n</p>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="screenShatterContainer" class="loading-screen hidden">
    <div class="loading-content">
      <div class="cosmic-title">
        <div class="title-glow"></div>
        <h1 class="title-text">ğŸ’– Nuestro Universo de Amor ğŸ’–</h1>
      </div>
      
      <!-- Floating peluches -->
      <div class="floating-peluches">
        <div class="peluche-float tich-float">
          <img src="img/tich1.jpg" alt="Tich" class="peluche-img-float">
        </div>
        <div class="peluche-trail"></div>
        <div class="peluche-float camila-float">
          <img src="img/camila1.jpg" alt="Camila" class="peluche-img-float">
        </div>
      </div>
      
      <!-- Progress bar -->
      <div class="cosmic-progress-container">
        <div class="progress-track">
          <div id="cosmicProgressFill" class="progress-fill"></div>
        </div>
        <div id="loadingPercentage" class="loading-percentage">0%</div>
      </div>
      
      <div id="loadingStatus" class="loading-status">Preparando el universo...</div>
      <div id="loadingSubstatus" class="loading-substatus">Cargando estrellas de amor...</div>
      
      <!-- Cosmic hearts -->
      <div class="cosmic-hearts">
        <div class="cosmic-heart">ğŸ’–</div>
        <div class="cosmic-heart">ğŸ’•</div>
        <div class="cosmic-heart">ğŸ’</div>
        <div class="cosmic-heart">ğŸ’—</div>
        <div class="cosmic-heart">ğŸ’˜</div>
        <div class="cosmic-heart">ğŸ’</div>
      </div>
      
      <!-- Stellar particles -->
      <div class="stellar-particles">
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
        <div class="star-particle"></div>
      </div>
    </div>
  </div>

  <!-- SECCIÃ“N: Bienvenida -->
  <section id="bienvenida" class="pantalla">
    <div class="bienvenida-bg"></div>
    
    
    
    <!-- Hero Section Principal -->
    <div class="hero-container">
      <div class="hero-content">
        <div class="hero-greeting">
          <h1 id="saludo">Bienvenida a Nuestro Universo ğŸ’–</h1>
          <p class="hero-message" id="frase-romantica">Mi amor, cada dÃ­a que pasas aquÃ­ es una nueva aventura llena de amor. Te amo mÃ¡s que las estrellas en el cielo âœ¨ğŸ˜</p>
        </div>
        
        <!-- Peluches Centrados -->
        <div class="peluches-hero">
          <div class="peluche-container" id="peluche-tich">
            <div class="peluche-card" onclick="hablarPeluche('tich')">
              <img src="img/tich1.jpg" alt="Tich" class="peluche-img">
              <div class="peluche-name">Tich</div>
            </div>
            <div id="frase-tich" class="globito"></div>
          </div>
          
          <div class="love-connector">
            <div class="heart-pulse">ğŸ’•</div>
            <div class="connection-line"></div>
          </div>
          
          <div class="peluche-container" id="peluche-camila">
            <div class="peluche-card" onclick="hablarPeluche('camila')">
              <img src="img/camila1.jpg" alt="Camila" class="peluche-img">
              <div class="peluche-name">Camila</div>
            </div>
            <div id="frase-camila" class="globito"></div>
          </div>
        </div>
      </div>
      
      <!-- Elementos decorativos flotantes -->
      <div class="floating-elements">
        <div class="floating-heart">ğŸ’–</div>
        <div class="floating-heart">ğŸ’•</div>
        <div class="floating-heart">ğŸ’</div>
        <div class="floating-heart">ğŸ’—</div>
        <div class="floating-heart">ğŸ’˜</div>
        <div class="floating-star">âœ¨</div>
        <div class="floating-star">â­</div>
        <div class="floating-star">ğŸŒŸ</div>
        <div class="floating-star">ğŸ’«</div>
        <div class="floating-star">â­</div>
        <div class="floating-emoji">ğŸŒ¸</div>
        <div class="floating-emoji">ğŸŒº</div>
        <div class="floating-emoji">ğŸŒ»</div>
        <div class="floating-emoji">ğŸŒ·</div>
        <div class="floating-emoji">ğŸŒ¹</div>
        <div class="floating-emoji">ğŸŒ¼</div>
      </div>
    </div>
    
    <!-- BotÃ³n para iniciar aventura -->
    <button id="btnIniciarAventura" class="btn-iniciar-aventura visible">
      âœ¨ Explorar Universo âœ¨
    </button>
  </section>

  <!-- MENÃš -->
  <section id="menu" class="pantalla hidden">
    <button class="btn-sec btn-volver" onclick="playButtonSound(); volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver</button>
    <div class="sections-modern">
      <div class="sections-header">
        <h2>Nuestro Universo de Amor</h2>
        <p>Descubre cada rincÃ³n de nuestro mundo especial</p>
      </div>
      
      <div class="sections-grid">
        <div class="section-card">
          <div class="section-icon">ğŸ“–</div>
          <div class="section-content">
            <h3>Nuestra Historia</h3>
            <p>El libro de nuestro amor</p>
          </div>
          <button class="btn-sec" onclick="playButtonSound(); mostrarSeccion('historia')">âœ¨</button>
        </div>
        
        <div class="section-card">
          <div class="section-icon">ğŸ’Œ</div>
          <div class="section-content">
            <h3>Cartas de Amor</h3>
            <p>Mensajes del corazÃ³n</p>
          </div>
          <button class="btn-sec" onclick="playButtonSound(); mostrarSeccion('cartas')">âœ¨</button>
        </div>
        
        <div class="section-card">
          <div class="section-icon">ğŸ“¸</div>
          <div class="section-content">
            <h3>Nuestros Momentos</h3>
            <p>Recuerdos eternos</p>
          </div>
          <button class="btn-sec" onclick="playButtonSound(); mostrarSeccion('fotos')">â¤ï¸</button>
        </div>
        
        <div class="section-card">
          <div class="section-icon">â¤ï¸</div>
          <div class="section-content">
            <h3>Te ExtraÃ±o</h3>
            <p>Un abrazo virtual</p>
          </div>
          <button class="btn-sec" onclick="playButtonSound(); mostrarSeccion('extraÃ±o')">â¬…ï¸ Volver al menÃº</button>
        </div>
      </div>
    </div>
  </section>

  <!-- CARTAS -->
  <section id="cartas" class="pantalla hidden">
    <button class="btn-sec" onclick="volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver al menÃº</button>
    <div class="cartas-hero">
      <h2>ğŸ’Œ Cartas de Amor</h2>
      <p>Mensajes que te abrazan incluso cuando estamos lejos. ğŸ“… Nueva carta cada sÃ¡bado a las 7:00 PM</p>
      <div id="listaCartas"></div>
    </div>
  </section>

  <!-- FOTOS -->
  <section id="fotos" class="pantalla hidden">
    <button class="btn-sec btn-volver" onclick="playButtonSound(); volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver al menÃº</button>
    <div class="fotos-hero">
      <h2>ğŸ“¸ Nuestros Momentos</h2>
      <p>Cada imagen guarda un pedacito de nuestro corazÃ³n ğŸ’•</p>
      <div class="galeria-fotos"></div>
    </div>
  </section>

  <!-- PELI -->
  <section id="peli" class="pantalla hidden">
    <button class="btn-sec btn-volver" onclick="playButtonSound(); volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver al menÃº</button>
    <div class="peli-hero">
      <h2>ğŸ¬ Nuestra Cita Virtual</h2>
      <p>Mantita, palomitas y mucho amor a distancia ğŸ’• ğŸ“… Link habilitado todos los sÃ¡bados a las 7:00 PM</p>
      
      <div class="peli-content">
        <h3>Nuestra pelÃ­cula del corazÃ³n</h3>
        <p>Cada pelÃ­cula es una excusa para estar juntos, aunque sea a travÃ©s de la pantalla.</p>
        <input type="text" id="linkPelicula" value="https://example.com" readonly>
        <button class="btn-sec" onclick="copiarLinkPelicula()">ğŸ”— Copiar link</button>
        <p class="tip-peli">ğŸ’¡ Tip: Prepara las palomitas y tu mantita favorita</p>
      </div>
    </div>
  </section>

  <!-- ORACIÃ“N -->
  <section id="oracion" class="pantalla hidden">
    <button class="btn-sec btn-volver" onclick="playButtonSound(); volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver</button>
    <div class="oracion-hero">
      <h2>ğŸ™ Nuestro Momento Sagrado</h2>
      <p>Cuando nuestras almas se encuentran en oraciÃ³n âœ¨ ğŸ“… Nuevo link cada madrugada a las 3:00 AM</p>
      
      <div class="oracion-content">
        <h3>Hora de oraciÃ³n â€” 03:00 a.m.</h3>
        <p>Cada madrugada, nuestros corazones se unen en una sola plegaria. El enlace aparecerÃ¡ aquÃ­ cuando sea la hora.</p>
        <input type="text" id="linkOracion" value="https://meet.google.com/link-aqui" readonly>
        <div class="oracion-buttons">
          <button class="btn-sec" onclick="navigator.clipboard.writeText(document.getElementById('linkOracion').value); alert('Link copiado')">ğŸ’¾ Guardar</button>
          <button class="btn-sec" onclick="navigator.clipboard.writeText(document.getElementById('linkOracion').value); alert('Link copiado')">ğŸ”— Copiar link</button>
        </div>
        <p class="versiculo">"Donde dos o tres se reÃºnen en mi nombre, allÃ­ estoy yo en medio de ellos" - Mateo 18:20</p>
      </div>
    </div>
  </section>

  <!-- TE EXTRAÃ‘O -->
  <section id="extraÃ±o" class="pantalla hidden">
    <button class="btn-sec btn-volver" onclick="playButtonSound(); volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver al menÃº</button>
    <div class="extraÃ±o-hero">
      <h2>â¤ï¸ Te ExtraÃ±o Mucho</h2>
      <p>El rincÃ³n donde mis abrazos viajan hasta ti ğŸ’•</p>
      
      <div class="juego-container">
        <div id="juego-inicio" class="juego-pantalla">
          <div class="juego-titulo">
            <h3>ğŸ® Juego del Amor ğŸ’•</h3>
            <p>Â¡Demuestra cuÃ¡nto me conoces, mi amor!</p>
          </div>
          <div class="juego-descripcion">
            <p>Responde las preguntas correctamente y gana corazones. Â¡Cada respuesta correcta te acerca mÃ¡s a mÃ­! ğŸ’–</p>
          </div>
          <button class="btn-juego-iniciar" onclick="iniciarJuego()">ğŸ’• Â¡Comenzar Juego!ğŸ’•</button>
          <div class="juego-puntuacion">
            <div class="corazones-container">
              ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–
            </div>
            <p>PuntuaciÃ³n: <span id="puntuacion">0</span></p>
          </div>
        </div>
        
        <div id="juego-preguntas" class="juego-pantalla hidden">
          <p class="pregunta-numero">Pregunta <span id="pregunta-actual">1</span> de 5</p>
          <h3 id="pregunta-texto"></h3>
          <div id="opciones-container"></div>
        </div>
        
        <div id="juego-mensaje-especial" class="juego-pantalla hidden">
          <h3>ğŸ’• Pregunta Especial ğŸ’•</h3>
          <p>Â¡Una Ãºltima pregunta muy importante!</p>
          <h4>Â¿Me extraÃ±as?</h4>
          <p>Escribe un mensaje especial para mÃ­ y lo recibirÃ© en mi WhatsApp ğŸ’™</p>
          <textarea id="mensaje-textarea" placeholder="Escribe tu mensaje aquÃ­..."></textarea>
          <p id="contador-caracteres">0/500</p>
          <button class="btn-juego-iniciar" onclick="enviarMensajeWhatsApp()">ğŸ“± Enviar a WhatsAppğŸ’•</button>
          <button class="btn-juego-saltar" onclick="mostrarResultado()">Saltar Mensaje</button>
        </div>
        
        <div id="juego-resultado" class="juego-pantalla hidden">
          <h3>Â¡IncreÃ­ble! ğŸ‰</h3>
          <p>Â¡Sabes todo sobre mÃ­!</p>
          <p id="puntuacion-final">5/5</p>
          <div class="corazones-finales">ğŸ’–ğŸ’–ğŸ’–ğŸ’–ğŸ’–</div>
          <p id="mensaje-final">Â¡Eres la persona mÃ¡s especial del mundo! Cada respuesta correcta me recuerda por quÃ© te amo tanto. ğŸ’•</p>
          <p>Te extraÃ±o mucho, mi amor. Este juego es solo una pequeÃ±a forma de decirte que siempre estÃ¡s en mi corazÃ³n. â¤ï¸</p>
          <button class="btn-juego-iniciar" onclick="iniciarJuego()">ğŸ’• Jugar NuevamenteğŸ’•</button>
        </div>
      </div>
    </div>
  </section>

  <!-- ğŸ“– NUESTRA HISTORIA - LIBRO VINTAGE -->
  <section id="historia" class="pantalla hidden">
    <button class="btn-sec btn-volver" onclick="playButtonSound(); volverASeccionAnterior()" style="position: absolute; top: 20px; left: 20px; z-index: 1000;">â¬…ï¸ Volver al menÃº</button>
    
    <div class="vintage-container">
      <!-- ğŸ“– Libro cerrado vintage -->
      <div id="vintage-book-closed" style="display: block;">
        <div class="vintage-book-cover">
          <div class="vintage-bg-pattern"></div>
          <div class="vintage-spine"></div>
          <div class="vintage-pages-stack"></div>
          <div class="vintage-title-section">
            <h1 class="vintage-main-title">Nuestra Historia</h1>
            <p class="vintage-subtitle">Un amor que comenzÃ³ en pandemia</p>
            <div class="vintage-authors">
              <p>Cachetitos & BebÃ© Koalita</p>
            </div>
            <div class="vintage-year">2024</div>
          </div>
        </div>
      </div>

      <!-- ğŸ“– Libro abierto vintage -->
      <div id="vintage-book-open" class="vintage-book-open hidden">
        <div class="vintage-pages-container">
          <!-- PÃ¡gina izquierda -->
          <div class="vintage-page left-vintage-page">
            <div class="vintage-page-content" id="left-vintage-content">
              <!-- Contenido de la pÃ¡gina izquierda -->
            </div>
          </div>
          
          <!-- PÃ¡gina derecha -->
          <div class="vintage-page right-vintage-page">
            <div class="vintage-page-content" id="right-vintage-content">
              <!-- Contenido de la pÃ¡gina derecha -->
            </div>
          </div>
        </div>
        
        <!-- Controles vintage -->
        <div class="vintage-controls">
          <button class="vintage-btn" onclick="irAPortadaVintage()">ğŸ“– Portada</button>
          <button id="vintage-prev-btn" class="vintage-btn" onclick="paginaAnteriorVintage()">â† Anterior</button>
          <span id="vintage-page-info" class="vintage-page-info">PÃ¡gina 1 de 1</span>
          <button id="vintage-next-btn" class="vintage-btn" onclick="paginaSiguienteVintage()">Siguiente â†’</button>
          <button class="vintage-btn cerrar-vintage" onclick="cerrarLibroVintage()">ğŸ“– Cerrar</button>
        </div>
      </div>
    </div>
  </section>

  <!-- EmailJS para notificaciones de respaldo -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
  <script src="./js/contenido-libro.js"></script>
  <script src="./js/conversaciones.js"></script>
  <script src="./js/loading-epic.js"></script>
  <script src="./js/juego-te-extraÃ±o.js"></script>
  <script src="./js/script.js"></script>
</body>
</html>
