<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>💖 Nuestro Universo de Amor 💖</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- SCRIPT DE LOGIN ANTES DE TODO - BLOQUEA LA PÁGINA COMPLETAMENTE -->
  <script>
    // BLOQUEAR TODO HASTA AUTENTICAR - EJECUTAR INMEDIATAMENTE
    (function() {
      // VERIFICAR AUTENTICACIÓN ANTES DE QUE CUALQUIER COSA CARGUE
      // LIMPIAR SESIÓN PARA PROBAR EL LOGIN (TEMPORAL - QUITAR DESPUÉS)
      // localStorage.removeItem('auth');
      
      const isAuth = localStorage.getItem('auth') === 'true';
      
      // Si NO está autenticado, BLOQUEAR COMPLETAMENTE
      if (!isAuth) {
        // Escribir estilos que bloqueen TODO excepto el login
        document.write('<style>' +
          'html, body { margin: 0; padding: 0; overflow: hidden !important; } ' +
          'body > *:not(#loginOverlay) { display: none !important; visibility: hidden !important; opacity: 0 !important; pointer-events: none !important; } ' +
          '#loginOverlay { display: flex !important; position: fixed !important; top: 0 !important; left: 0 !important; width: 100vw !important; height: 100vh !important; z-index: 2147483647 !important; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; } ' +
          '</style>');
      } else {
        // Si está autenticado, permitir que todo cargue
        document.body.classList.add('authenticated');
      }
    })();
  </script>
  <link rel="stylesheet" href="./css/style.css" />
  <style>
    /* FORZAR LOGIN VISIBLE - SOBREESCRIBIR TODO */
    #loginOverlay {
      position: fixed !important;
      top: 0 !important;
      left: 0 !important;
      width: 100vw !important;
      height: 100vh !important;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      z-index: 2147483647 !important; /* z-index máximo posible */
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
      font-family: 'Poppins', sans-serif !important;
      visibility: visible !important;
      opacity: 1 !important;
      pointer-events: auto !important;
    }
    
    /* OCULTAR ABSOLUTAMENTE TODO EXCEPTO EL LOGIN */
    body:not(.authenticated) > *:not(#loginOverlay),
    body:not(.authenticated) audio,
    body:not(.authenticated) section,
    body:not(.authenticated) div:not(#loginOverlay):not(#loginBox),
    body:not(.authenticated) modal {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
      position: absolute !important;
      left: -9999px !important;
    }
    
    /* CUANDO ESTÁ AUTENTICADO - OCULTAR LOGIN Y MOSTRAR CONTENIDO */
    body.authenticated #loginOverlay {
      display: none !important;
      visibility: hidden !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    
    body.authenticated > *:not(#loginOverlay) {
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
    }
    
    body.authenticated section {
      display: block !important;
    }
    
    body.authenticated audio {
      display: block !important;
    }
    
    #loginBox {
      background: rgba(255, 255, 255, 0.95) !important;
      border-radius: 20px !important;
      padding: 40px !important;
      max-width: 400px !important;
      width: 90% !important;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3) !important;
      text-align: center !important;
    }
    
    #loginBox h2 {
      color: #667eea !important;
      margin-bottom: 10px !important;
      font-size: 2rem !important;
    }
    
    #loginBox p {
      color: #666 !important;
      margin-bottom: 30px !important;
    }
    
    #loginBox input {
      width: 100% !important;
      padding: 15px !important;
      margin-bottom: 15px !important;
      border: 2px solid #ddd !important;
      border-radius: 10px !important;
      font-size: 1rem !important;
      box-sizing: border-box !important;
    }
    
    #loginBox input:focus {
      outline: none !important;
      border-color: #667eea !important;
    }
    
    #loginBox button {
      width: 100% !important;
      padding: 15px !important;
      background: linear-gradient(45deg, #667eea, #764ba2) !important;
      color: white !important;
      border: none !important;
      border-radius: 10px !important;
      font-size: 1.1rem !important;
      font-weight: 600 !important;
      cursor: pointer !important;
      transition: transform 0.2s !important;
    }
    
    #loginBox button:hover {
      transform: translateY(-2px) !important;
    }
    
    #loginError {
      color: #e74c3c !important;
      margin-top: 10px !important;
      font-size: 0.9rem !important;
      display: none !important;
    }
  </style>
  <script>
    // SCRIPT DE LOGIN - EJECUTAR INMEDIATAMENTE
    (function() {
      const USUARIOS = [
        { username: "TICH", password: "TICH225" }
      ];

      function checkAuth() {
        return localStorage.getItem('auth') === 'true';
      }

      function login(username, password) {
        const user = USUARIOS.find(u => 
          u.username.toLowerCase() === username.toLowerCase() && 
          u.password === password
        );
        
        if (user) {
          localStorage.setItem('auth', 'true');
          localStorage.setItem('username', user.username);
          return true;
        }
        return false;
      }

      // EJECUTAR CUANDO EL DOM ESTÉ LISTO
      function initLogin() {
        const overlay = document.getElementById('loginOverlay');
        const loginForm = document.getElementById('loginForm');
        const errorMsg = document.getElementById('loginError');
        
        // Si ya está autenticado, mostrar contenido y ocultar login
        if (checkAuth()) {
          document.body.classList.add('authenticated');
          return;
        }
        
        // Si NO está autenticado, FORZAR login visible y OCULTAR TODO
        document.body.classList.remove('authenticated');
        if (overlay) {
          overlay.style.display = 'flex';
          overlay.style.visibility = 'visible';
          overlay.style.opacity = '1';
          overlay.style.zIndex = '2147483647';
          overlay.style.position = 'fixed';
          overlay.style.top = '0';
          overlay.style.left = '0';
          overlay.style.width = '100vw';
          overlay.style.height = '100vh';
        }
        
        // OCULTAR TODOS LOS ELEMENTOS excepto el login
        const allElements = document.querySelectorAll('*');
        allElements.forEach(function(el) {
          if (el.id !== 'loginOverlay' && el.id !== 'loginBox' && el.id !== 'loginForm' && 
              el.id !== 'username' && el.id !== 'password' && el.id !== 'loginError' &&
              !el.closest('#loginOverlay') && el.tagName !== 'SCRIPT' && el.tagName !== 'STYLE') {
            el.style.display = 'none';
            el.style.visibility = 'hidden';
            el.style.opacity = '0';
            el.style.pointerEvents = 'none';
          }
        });

        // Manejar el formulario
        if (loginForm) {
          loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;

            if (!username || !password) {
              if (errorMsg) {
                errorMsg.textContent = 'Por favor completa todos los campos';
                errorMsg.style.display = 'block';
              }
              return;
            }

            if (login(username, password)) {
              document.body.classList.add('authenticated');
              // Ocultar login
              if (overlay) {
                overlay.style.display = 'none';
                overlay.style.visibility = 'hidden';
                overlay.style.opacity = '0';
              }
              // Mostrar TODO el contenido
              const allElements = document.querySelectorAll('*');
              allElements.forEach(function(el) {
                if (el.id !== 'loginOverlay' && !el.closest('#loginOverlay')) {
                  el.style.display = '';
                  el.style.visibility = '';
                }
              });
              if (errorMsg) errorMsg.style.display = 'none';
              // Recargar para asegurar que todo funcione
              window.location.reload();
            } else {
              if (errorMsg) {
                errorMsg.textContent = 'Usuario o contraseña incorrectos';
                errorMsg.style.display = 'block';
              }
            }
          });
        }
      }

      // Ejecutar cuando DOM esté listo
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initLogin);
      } else {
        initLogin();
      }
    })();
  </script>
</head>
<body style="overflow: hidden;">
  <!-- LOGIN OVERLAY - PRIMERO QUE TODO - ESTILOS INLINE PARA GARANTIZAR VISIBILIDAD -->
  <div id="loginOverlay" style="position: fixed !important; top: 0 !important; left: 0 !important; width: 100vw !important; height: 100vh !important; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important; z-index: 2147483647 !important; display: flex !important; justify-content: center !important; align-items: center !important; font-family: 'Poppins', sans-serif !important; visibility: visible !important; opacity: 1 !important; pointer-events: auto !important;">
    <div id="loginBox" style="background: rgba(255, 255, 255, 0.95); border-radius: 20px; padding: 40px; max-width: 400px; width: 90%; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); text-align: center;">
      <h2 style="color: #667eea; margin-bottom: 10px; font-size: 2rem; margin: 0 0 10px 0;">💖 Acceso al Universo 💖</h2>
      <p style="color: #666; margin-bottom: 30px;">Ingresa tus credenciales para continuar</p>
      <form id="loginForm">
        <input type="text" id="username" placeholder="Usuario" required autocomplete="off" style="width: 100%; padding: 15px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 1rem; box-sizing: border-box;">
        <input type="password" id="password" placeholder="Contraseña" required autocomplete="off" style="width: 100%; padding: 15px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 1rem; box-sizing: border-box;">
        <button type="submit" style="width: 100%; padding: 15px; background: linear-gradient(45deg, #667eea, #764ba2); color: white; border: none; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: transform 0.2s;">Ingresar 💕</button>
        <div id="loginError" style="color: #e74c3c; margin-top: 10px; font-size: 0.9rem; display: none;"></div>
      </form>
    </div>
  </div>

  <!-- Script para OCULTAR TODO excepto login ANTES de que cargue -->
  <script>
    (function() {
      // Verificar autenticación
      const isAuth = localStorage.getItem('auth') === 'true';
      
      if (!isAuth) {
        // Si NO está autenticado, OCULTAR TODO excepto login
        document.addEventListener('DOMContentLoaded', function() {
          const allElements = document.querySelectorAll('*');
          allElements.forEach(function(el) {
            if (el.id !== 'loginOverlay' && el.id !== 'loginBox' && el.id !== 'loginForm' && 
                el.id !== 'username' && el.id !== 'password' && el.id !== 'loginError' &&
                !el.closest('#loginOverlay')) {
              el.style.display = 'none';
              el.style.visibility = 'hidden';
            }
          });
        });
        
        // También ejecutar inmediatamente
        setTimeout(function() {
          const allElements = document.querySelectorAll('*');
          allElements.forEach(function(el) {
            if (el.id !== 'loginOverlay' && el.id !== 'loginBox' && el.id !== 'loginForm' && 
                el.id !== 'username' && el.id !== 'password' && el.id !== 'loginError' &&
                !el.closest('#loginOverlay')) {
              el.style.display = 'none';
              el.style.visibility = 'hidden';
            }
          });
        }, 0);
      }
    })();
  </script>

  <!-- Audios -->
  <audio id="musicaFondo" loop muted style="display: none;"></audio>
  <audio id="musicaCarta" style="display: none;"></audio>
  <audio id="musicaDespegueCohete" preload="auto" style="display: none;"></audio>

  <!-- Modal carta (iframe) -->
  <div id="modal" class="modal hidden" role="dialog" aria-modal="true" style="display: none;">
    <div class="modal-content">
      <span class="close" id="closeModal">&times;</span>
      <iframe id="cartaIframe" src="" frameborder="0"></iframe>
    </div>
  </div>

  <!-- Loading Screen -->
  <div id="loadingScreen" class="loading-screen" style="display: none;">
    <div class="loading-content">
      <div class="loading-hearts">
        <div class="heart">💖</div>
        <div class="heart">💕</div>
        <div class="heart">💝</div>
      </div>
      <h2 class="loading-title">Cargando nuestro universo...</h2>
      <div class="loading-bar">
        <div class="loading-progress"></div>
      </div>
      <p class="loading-text">Preparando la magia del amor</p>
    </div>
  </div>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-background">
      <div class="stars"></div>
      <div class="planets">
        <div class="planet planet-1"></div>
        <div class="planet planet-2"></div>
        <div class="planet planet-3"></div>
      </div>
    </div>
    
    <div class="hero-content">
      <div class="hero-greeting">
        <h1 class="hero-title">Buenas tardes mi amor</h1>
        <div class="hero-heart">💖</div>
      </div>
      
      <div class="hero-message">
        <p class="message-text">Mi amor, Camilita, pienso bonitico. Qué ganas de besarte esa naricita linda 💖</p>
      </div>
      
      <div class="hero-profiles">
        <div class="profile-card">
          <div class="profile-image">
            <img src="./images/tich-profile.jpg" alt="Tich" />
          </div>
          <h3 class="profile-name">Tich</h3>
        </div>
        
        <div class="profile-connection">
          <div class="connection-line"></div>
          <div class="connection-heart">💖</div>
        </div>
        
        <div class="profile-card">
          <div class="profile-image">
            <img src="./images/camila-profile.jpg" alt="Camila" />
          </div>
          <h3 class="profile-name">Camila</h3>
        </div>
      </div>
      
      <div class="hero-action">
        <button id="exploreBtn" class="explore-btn">
          <span class="btn-star">✨</span>
          <span class="btn-text">EXPLORAR UNIVERSO</span>
          <span class="btn-star">⭐</span>
        </button>
      </div>
    </div>
  </section>

  <!-- Contenido del libro -->
  <section id="bookContent" class="book-content hidden">
    <div class="book-container">
      <div class="book-header">
        <h2 class="book-title">Nuestro Libro de Amor</h2>
        <button id="closeBook" class="close-book-btn">✕</button>
      </div>
      
      <div class="book-pages">
        <div class="page active" data-page="1">
          <div class="page-content">
            <h3 class="page-title">Capítulo 1: El Primer Encuentro</h3>
            <p class="page-text">
              Todo comenzó en un día especial cuando nuestros caminos se cruzaron. 
              Desde ese momento, supe que algo mágico estaba por comenzar...
            </p>
            <div class="page-image">
              <img src="./images/encuentro.jpg" alt="Primer encuentro" />
            </div>
          </div>
        </div>
        
        <div class="page" data-page="2">
          <div class="page-content">
            <h3 class="page-title">Capítulo 2: Los Primeros Pasos</h3>
            <p class="page-text">
              Cada conversación era una nueva aventura, cada mensaje una sonrisa, 
              cada momento juntos un tesoro que guardamos en nuestros corazones.
            </p>
            <div class="page-image">
              <img src="./images/primeros-pasos.jpg" alt="Primeros pasos" />
            </div>
          </div>
        </div>
        
        <div class="page" data-page="3">
          <div class="page-content">
            <h3 class="page-title">Capítulo 3: El Amor Crece</h3>
            <p class="page-text">
              Con el tiempo, nuestro amor se fortaleció como las estrellas en el cielo. 
              Cada día es una nueva oportunidad para demostrarnos nuestro cariño.
            </p>
            <div class="page-image">
              <img src="./images/amor-crece.jpg" alt="El amor crece" />
            </div>
          </div>
        </div>
      </div>
      
      <div class="book-navigation">
        <button id="prevPage" class="nav-btn prev-btn">← Anterior</button>
        <span id="pageIndicator" class="page-indicator">Página 1 de 3</span>
        <button id="nextPage" class="nav-btn next-btn">Siguiente →</button>
      </div>
    </div>
  </section>

  <!-- Sección de conversaciones -->
  <section id="conversationsSection" class="conversations-section hidden">
    <div class="conversations-container">
      <div class="conversations-header">
        <h2 class="conversations-title">Nuestras Conversaciones</h2>
        <button id="closeConversations" class="close-conversations-btn">✕</button>
      </div>
      
      <div class="conversations-content">
        <div class="conversation-item">
          <div class="conversation-bubble">
            <p class="conversation-text">"Eres la luz de mi vida"</p>
            <span class="conversation-time">Hoy, 2:30 PM</span>
          </div>
        </div>
        
        <div class="conversation-item">
          <div class="conversation-bubble">
            <p class="conversation-text">"Te amo más que las palabras pueden expresar"</p>
            <span class="conversation-time">Ayer, 8:45 PM</span>
          </div>
        </div>
        
        <div class="conversation-item">
          <div class="conversation-bubble">
            <p class="conversation-text">"Eres mi mejor amiga y mi gran amor"</p>
            <span class="conversation-time">Hace 2 días, 6:20 PM</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Scripts principales - SOLO CARGAR SI ESTÁ AUTENTICADO -->
  <script>
    // CARGAR SCRIPTS SOLO SI ESTÁ AUTENTICADO
    (function() {
      const isAuth = localStorage.getItem('auth') === 'true';
      
      if (isAuth) {
        // Solo cargar scripts si está autenticado
        const emailjs = document.createElement('script');
        emailjs.src = 'https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js';
        document.body.appendChild(emailjs);
        
        const contenido = document.createElement('script');
        contenido.src = './js/contenido-libro.js';
        document.body.appendChild(contenido);
        
        const conversaciones = document.createElement('script');
        conversaciones.src = './js/conversaciones.js';
        document.body.appendChild(conversaciones);
        
        const loading = document.createElement('script');
        loading.src = './js/loading-epic.js';
        document.body.appendChild(loading);
      }
    })();
  </script>
  
</body>
</html>